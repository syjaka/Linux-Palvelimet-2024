# Keskeneräinen

# Final Lab for Linux Palvelimet 2023

Tämä on labraharjoitus Tero karvisen Linux-palvelimet kurssilta. Teen harjoitusta harjoituksen vuoksi joten tehtävänannossa toivottua palautusta en suorita. Lisäksi oppimisen vuoksi raportoin tähän kaikki askeleet, vaikka sitä ei pyydetty.

a) [Taustatiedot - Jätän tässä tapauksessa tekemättä]()
b( [tiivistelmä koko työstä]()
c) [Ei kolema sekoseiskaa]()
d) [hey]()
e) [1000x nano]()
f) [staattisesti sinun]()
g) [Salattua hallintaa]()
h) [Djangon lahjat]()
h) [Tuotantopropelli]()
y) [Työskentely-ympäristö]()
z) [Alkutoimet]()

---

# z) Työskentely-ympäristö

- Tehtävä toteutettiin MacBook Retina 12-inch, koneella jossa host OS on Ventura 13.6.1 käyttöjärjestelmä Suomen maa-asetuksilla ja suomen kielellä. - Koneessa on 1,3GHz kaksiytiminen Intel Core i5 prosessori ja 8Gt 1867 MHz LPDDR3 muistia. Näytönohjain on Intel HD Graphics 615 jossa VRAM 1536 Mt.
- Guest OS on Debian GNU/Linux 12 (bookworm) joka pyörii Virtual Boxin 7.0 versiossa. Debianilla on tallennustilaa 60MB ja muistia 4096MB.

---

Aloitin työskentelyn klo 23.00

#) Alkutoimet

- Aloitin työskentelyn koneella jossa oli valmiiksi
  > päivitykset `sudo apt-get update` + `sudo apt-get -y dist-upgrade` ja
  > palomuuri `sudo apt-get -y install ufw` + `sudo ufw enable` ja `sudo systemctl restart ufw` asennettu.
- Jatkoin Guest additions asennuksella
  >Valitsin file managerista vBox_Gas_7.0.12 cdromin ja hiiren oikeala `open terminal here`
  > Komento `sudo bash VBoxLinuxAdditions.run` asensi Guest additions ja uudelleenkäynnistys otti ne käyttöön.
  > `sudo apt-get -y install bash-completion` asensi bash completionin.
  > `sudo apt-get install git` asensi gitin, toiveissa siirtää raportin tiedosto linuxin kautta githubiin.
  > `sudo apt-get install pwgen` asensi salasanavelhon
  

  ---

 ## b) tiivistelmä koko työstä

[Takaisin ylös](

  ---

  Ao. tehtävänantojen lähteenä on Tero karvisen luoma labraharjoitus **Final Lab for Linux Palvelimet 2023**

 ## c) Ei kolema sekaseiskaa

 Suojaa raportti linux-oikeuksilla, niin että vain minä onnistun sen avaamaan.
> - Loin kotihakemistoon `report/index.md` tiedoston `mkdir report`ja `nano index.md`. Tallensin sisältöön vain kadi.
> - Tarkistan tiedoston oikeudet ja jätän ainoastaan itselleni kaikki `sudo chmod u=rwx,g=,o= ./index.md`
>   > ![repo1]()

--- 

## d) `hey`

Tee kaikkien käyttöön soveltuva komento `hey` joka tulostaa tervehdyksen ja jotain ajankohtaista tietoa
> - `mkdir -p skriptit/hey` ja `nano hey`luo hakemistot ja hey tiedoston.
> - Tallennan sinne skriptin
>   >     !/usr/bin/bash
>   > 
>   >     PAIVA=$(date +"%Y-%m-%d")
>   >     AIKA=$(date +"%H:%M")
>   >     echo " "
>   >     echo "Tervehdys $USER"
>   >     echo "Tänään on $PAIVA ja kello on $AIKA."
>   >     echo "Olet käyttäjäryhmään '$GROUP' kuuluva käyttäjä."
>   >     echo " "
> - Joka palutti
>   > ![repo2]()
> - `chmod ugo+rx netsee`antaa kaikille oikeudet käyttää komentoa

---

## e) 1000x nano

Asenna micro ja sille joku plugin
> -  `sudo apt-get -y install micro` asentaa `export EDITOR=micro` määrittää defaultiksi
> -  Avaan micron `ctrl + E` avasi komentorvin ja `plugin install filemanager`asensi pluginin.
> -  Micro auki `ctrl + g avasi helpin ja ctrl+e avasi komentorivin.
> -  `tree` avasi filemanagerin (Zyedidia 2023).
> -  open
> -  `set filemanager.openonstart on`asettaa filemanagerin avautumaan microa avatessa, `off` (Markandpreston 2022).
>   > ![repo3]()

[Taka

---

## f) Staattisesti sinun

Asenna Apache-weppipalvelin
Tee järjestelmään käyttäjä Erkki Esimerkki tunnuksella "erkki". Lisää Erkin salasana raporttiisi, jotta voit antaa sen Erkille myöhemmin.
Tee Erkille kotisivu, joka näkyy osoitteessa http://localhost/~erkki/
> - `pwgen -s 20 1` generoi aluksi erkille salasanan.
> - Erkki Esimerkki "erkki" pw 9OMg2HsxR02bacxNASQ5 luotiin `sudo adduser erkki`
> - Siirryin erkin kotihakemistoon ja otin uderdir moduulin käyttöön `sudo a2enmod userdir`
> - Apachepalvelimen uudelleenkäynnistys tapahtui komennolla `sudo service apache2 restart`
> - Siirryin erkin kotihakemistoon, mutta sain permission denied -herjan.
> - Annan kotihakemistoon tarvittavat oikeudet itselleni ja apachelle `sudo chmod u=rwx,g=rx,o=rx /home/erkki
> - Teen erkille `sudo mkdir public_html` komennolla public_html hakemiston. Toki olisin voinut tehdä tämän erkkinä `su erkki`, mutta oletin että se tullee tehdä ylläpitäjän roolissa
>  > - Tässä vaiheessa vaihdoin erkkiin jotta erkki itse päättää mitä julkaisee `su erkki`ja erkin salasana.
>  > - Siirryin selaimeen ja tein haun `http://localhost/erkki`joka palautti tyhjäm kotihakemiston
>  >   ![repo4]()
>  > - siirryin `public_html`-hakemistoon ja yritin luoda sinne `micro.html`tiedostoon html-pätkän.
>  > - Koska public_html oli sudokadin luoma piti omistajuutta/oikeuksia päivittää kadina `sudo chown erkki /home/erkki/public_html` jolla public_html siirtyi erkin omistukseen.
>  > - siirryin `public_html`-hakemistoon ja tällä kertaa loin sinne `micro.html`tiedostoon html-pätkän (Leino 2022).
>  >   ![repo5]()

---

## g) Salattua hallintaa

Asenna ssh-palvelin. 
- Tee uusi käyttäjä omalla nimelläsi, esim. minä tekisin "Tero Karvinen test", login name: "terote01"
- Automatisoi ssh-kirjautuminen julkisen avaimen menetelmällä, niin että et tarvitse salasanoja, kun kirjaudut sisään. Voit käyttää kirjautumiseen localhost-osoitetta
- Vaihda SSH-palvelin kuuntelemaan porttiin 1337/tcp
> - `sudo apt install ssh`asensi ssh-palvelimen ja tarkistus `systemctl status ssh` palautti palvelimentilan **active**.
> - `pwgen -s 20 1` generoi Kadille salasanan.
> - `sudo adduser kadite01`luo uuden käyttäjän `kadite01` jolle annan nimeksi "kadi Syrja testi" ja salasanaksi gAJk48XdDyDbLmevnFsK.
> - `ssh-keygen`generoi salasanaparin, jonka talletin oletuskohteeseen.
> - `ssh-copy-id  kadite01@localhost`.
> - Testi `ssh 'kadite01@localhost` näytti että sisään pääsin ilman salasanaa. Yo. osa tehtävästä tehty omien muistiinpanijeni pohjalta.
>   > ![repo6]()
> - Vaihdoin SSH-palvelimen porttiin muokkaamalla komennolla `sudo /etc/ssh/sshd_config` kyseistä tiedostoa, jonna vaihdoin portin 22 tilalle 1337.
>
> - (Edgaras & Noviantika, 2023)



Lähteet:

Edgaras G. & Noviantika G. How to Change the SSH Port on VPS, Common Ports and How to Choose the Right One, 2023. Luettavissa: https://www.hostinger.com/tutorials/how-to-change-ssh-port-vps#2_Change_SSH_Configurations. Luettu 10.03.2024.

Zyedidia Micro plugin Filemanager, 2023. Luettavissa: https://github.com/micro-editor/updated-plugins/blob/master/filemanager-plugin/README.md. Luettu 10.03.2024. 

Karvinen T. Final Lab for Linux Palvelimet 2023, 2023. Luettavissa https://terokarvinen.com/2023/linux-palvelimet-2023-arvioitava-laboratorioharjoitus/?fromSearch=arvioitava. Luettu 09.03.2024.

Leino S. Apache-weppipalvelin (h3), 2022. Luettavissa: https://susannalehto.fi/2022/apache-weppipalvelin-h3/. Luettu 10.03.2024.

Markandpreston filemanager tutorial, 2022. Katsottavissa: https://www.youtube.com/watch?v=rgPS8U4puXY. Katsottu 10.03.2024.
